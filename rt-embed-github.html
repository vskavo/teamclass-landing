

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/vskavo/teamclass-landing@1.3.1/rt.css">

<script>
  window.rtWebhookUrl = "https://n8n.dataotec.com/webhook/d49b5d18-39c9-4bde-b58a-d3313919b0f1";
</script>

<div id="rt-app" class="rt-app" data-version="1.0.0">
<section class="rt-hero">
  <div class="rt-hero-text">
    <img src="https://landing-teamclass-dea7h4gka7h4c9fj.westus2-01.azurewebsites.net/wp-content/uploads/2025/10/logo.png" alt="TeamClass Logo" class="rt-hero-logo">
    <h1 class="rt-hero-title">
      <span class="rt-hero-title-main">¡Juega y arma la ruta formativa de tu equipo hoy!</span>
    </h1>
    <button class="rt-spin-btn" type="button" aria-live="polite">Gira la ruleta</button>
    <p class="rt-prize-note">*Por compra de uno o más cursos</p>
  </div>
  <div class="rt-wheel-container">
    <div class="rt-wheel-wrap" aria-live="polite">
      <div class="rt-pointer" aria-hidden="true"></div>
      <div class="rt-wheel" role="img" aria-label="Ruleta de premios">
        <div class="rt-wheel-labels" aria-hidden="true"></div>
      </div>
    </div>
  </div>
</section>

<section class="rt-courses-header">
  <h2 class="rt-courses-title">¿Qué capacitación necesita tu equipo?</h2>
  <p class="rt-courses-subtitle">Selecciona <span class="rt-add-icon">+</span> la escuela que tu equipo necesita</p>
</section>

<section class="rt-carousel" aria-label="Cursos disponibles">
  <button type="button" class="rt-nav rt-prev" aria-label="Anterior">‹</button>
  <div class="rt-viewport">
    <div class="rt-track" id="rt-track"></div>
  </div>
  <button type="button" class="rt-nav rt-next" aria-label="Siguiente">›</button>
</section>

<section class="rt-form-section">
  <div class="rt-form-left">
    <h2 class="rt-form-section-title">Resumen de tu ruta formativa</h2>
    <div class="rt-prize-box">
      <p class="rt-prize-box-label">GRATIS PARA TU EMPRESA:</p>
      <p class="rt-prize-box-value" id="rt-prize-box-display">—</p>
    </div>
    <div class="rt-courses-box">
      <p class="rt-courses-box-title">Escuela</p>
      <div class="rt-courses-box-list" id="rt-courses-box-list">
        <p class="rt-courses-box-empty">No has seleccionado ningún curso</p>
      </div>
    </div>
  </div>
  <form class="rt-form" id="rt-form" novalidate>
    <h2 class="rt-form-title">¡Estás a un paso!</h2>
    <p class="rt-form-subtitle">Rellena el formulario para que te contemos como realizar tu ruta formativa a la medida</p>
    
    <div class="rt-form-grid">
      <div class="rt-field"><label for="rt-name">Nombre*</label><input type="text" id="rt-name" name="name" placeholder="Tu nombre" required /></div>
      <div class="rt-field"><label for="rt-email">Correo*</label><input type="email" id="rt-email" name="email" placeholder="tu@correo.com" required /></div>
      <div class="rt-field"><label for="rt-phone">Teléfono</label><input type="tel" id="rt-phone" name="phone" placeholder="Tu teléfono" /></div>
      <div class="rt-field"><label for="rt-company">Empresa</label><input type="text" id="rt-company" name="company" placeholder="Tu empresa" /></div>
      <div class="rt-field"><label for="rt-position">Cargo</label><input type="text" id="rt-position" name="position" placeholder="Tu cargo" /></div>
    </div>
    <div class="rt-summary">
      <div class="rt-summary-item"><span class="rt-summary-label">Premio:</span><span id="rt-summary-prize" class="rt-summary-value">—</span></div>
      <div class="rt-summary-item"><span class="rt-summary-label">Cursos seleccionados:</span><div id="rt-summary-courses" class="rt-chips"></div></div>
    </div>
    <input type="hidden" id="rt-prize-input" name="prize" value="" />
    <input type="hidden" id="rt-courses-input" name="courses" value="" />
    <div class="rt-actions"><button id="rt-submit" type="submit" class="rt-submit">¡Hablemos!</button><div id="rt-status" class="rt-status" aria-live="polite"></div></div>
  </form>
</section>
</div>

<div class="rt-modal" id="rt-modal" aria-modal="true" role="dialog" hidden>
  <div class="rt-modal-content rt-modal-new">
    <p class="rt-modal-new-top">¡Felicidades!</p>
    <div class="rt-modal-new-card">
      <p class="rt-modal-new-card-title">Ganaste</p>
      <p class="rt-modal-new-card-prize" id="rt-modal-prize"></p>
      <p class="rt-modal-new-card-note">Válido solo hasta el 30/<span id="rt-modal-month"></span>. Sujeto a la compra de uno o más cursos</p>
    </div>
    <p class="rt-modal-new-bottom">APROVÉCHALO HACIENDO MATCH  CON NUESTRAS ESCUELAS DE FORMACIÓN</p>
    <button type="button" class="rt-modal-new-close" id="rt-modal-close" aria-label="Cerrar">Cerrar</button>
    <canvas class="rt-confetti" id="rt-confetti" aria-hidden="true"></canvas>
  </div>
</div>

<script>
  // Extiende el modal por encima del rt.js CDN: confeti + mes actual
  (function() {
    function withModalEnhancements() {
      const modal = document.getElementById('rt-modal');
      const prizeEl = document.getElementById('rt-modal-prize');
      const closeBtn = document.getElementById('rt-modal-close');
      const canvas = document.getElementById('rt-confetti');
      const monthSpan = document.getElementById('rt-modal-month');
      if (!modal || !prizeEl || !closeBtn) return;

      // Parchear showModal global si existe
      const origShow = window.showModal;
      window.showModal = function(prizeText) {
        if (typeof origShow === 'function') {
          try { origShow(prizeText); } catch (_) {}
        } else {
          prizeEl.textContent = prizeText || '';
          modal.removeAttribute('hidden');
          closeBtn.focus({ preventScroll: true });
        }

        // mes actual
        if (monthSpan) {
          const m = new Date().toLocaleString('es-ES', { month: 'long' });
          monthSpan.textContent = m.charAt(0).toUpperCase() + m.slice(1);
        }

        // confeti
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        let rafId;
        const colors = ['#e73ce6', '#c6df31', '#ffffff', '#4b1fb4'];
        const pieces = Array.from({ length: 120 }).map(() => ({
          x: Math.random() * canvas.clientWidth,
          y: -20 - Math.random() * 200,
          r: 4 + Math.random() * 6,
          c: colors[Math.floor(Math.random() * colors.length)],
          vx: -1 + Math.random() * 2,
          vy: 2 + Math.random() * 3,
          rot: Math.random() * Math.PI,
          vr: (-0.1 + Math.random() * 0.2)
        }));

        function resize() {
          const rect = canvas.getBoundingClientRect();
          canvas.width = rect.width * window.devicePixelRatio;
          canvas.height = rect.height * window.devicePixelRatio;
          ctx.setTransform(window.devicePixelRatio, 0, 0, window.devicePixelRatio, 0, 0);
        }
        resize();

        function tick() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
          pieces.forEach(p => {
            p.x += p.vx; p.y += p.vy; p.rot += p.vr;
            if (p.y - p.r > canvas.height) {
              p.y = -20; p.x = Math.random() * canvas.width; p.vy = 2 + Math.random() * 3;
            }
            ctx.save();
            ctx.translate(p.x, p.y);
            ctx.rotate(p.rot);
            ctx.fillStyle = p.c;
            ctx.fillRect(-p.r, -p.r * 0.5, p.r * 2, p.r);
            ctx.restore();
          });
          rafId = requestAnimationFrame(tick);
        }
        tick();

        const stop = () => { if (rafId) cancelAnimationFrame(rafId); };
        closeBtn.addEventListener('click', stop, { once: true });
      };
    }

    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', withModalEnhancements);
    } else {
      withModalEnhancements();
    }
  })();
</script>

<script src="https://cdn.jsdelivr.net/gh/vskavo/teamclass-landing@1.3.1/rt.js"></script>